[flake8]
max-line-length = 120
max-complexity = 10
max-methods = 10
max-module-members = 10
max-attributes = 8
max-local-variables = 10

# WPS rules
strictness = strict
show-source = True
statistics = True
doctests = True

# Extend default ignores (use extend-ignore instead of ignore to preserve defaults)
extend-ignore =
    D100, D101, D103, D104, D401,
    W503,
    ANN101, ANN102,
    WPS110, WPS111, WPS114,
    WPS201, WPS221, WPS226, WPS229,
    WPS237, WPS238,
    WPS305, WPS326, WPS338,
    WPS430, WPS476

per-file-ignores =
    # Test files in shared
    shared/tests/test_*.py: S101, WPS432, WPS442, WPS118, WPS204, WPS226, D102, D103, WPS459, WPS473, WPS476, WPS431, WPS214, WPS218, WPS328, WPS420, WPS122, ANN, DAR
    # Test files in tasks
    tasks/*/tests/*.py: S101, WPS432, WPS442, WPS118, WPS204, WPS226, D102, D103, WPS459, WPS473, WPS476, WPS431, WPS214, WPS218, WPS328, WPS420, WPS122, ANN, DAR
    tasks/*/tests/*/*.py: S101, WPS432, WPS442, WPS118, WPS204, WPS226, D102, D103, WPS459, WPS473, WPS476, WPS431, WPS214, WPS218, WPS328, WPS420, WPS122, ANN, DAR
    # Pytest conftest
    conftest.py: S101, WPS432, WPS442, WPS118, WPS204, WPS226, D103, WPS459, WPS473, WPS476, WPS431, ANN, DAR
    # Config files - magic numbers are acceptable defaults
    shared/infrastructure/config/*.py: WPS432
    # Init files
    __init__.py: F401, WPS412
    # Main entry points - magic numbers for ports
    tasks/*/main.py: WPS412, WPS432

exclude =
    .git,
    __pycache__,
    .venv,
    .eggs,
    *.egg,
    dist,
    build,
    __pypackages__,
    shared/tests,
    tasks/task_1/tests,
    tasks/task_2/tests,
    tasks/task_3/tests,
    tasks/task_4/tests
